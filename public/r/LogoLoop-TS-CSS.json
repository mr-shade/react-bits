{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "LogoLoop-TS-CSS",
  "type": "registry:block",
  "title": "LogoLoop",
  "description": "Continuously looping marquee of brand or tech logos with seamless repeat and hover pause.",
  "files": [
    {
      "path": "public/ts/default/src/ts-default/Animations/LogoLoop/LogoLoop.tsx",
      "content": "import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport './LogoLoop.css';\r\n\r\nexport type LogoItem =\r\n  | {\r\n      node: React.ReactNode;\r\n      href?: string;\r\n      title?: string;\r\n      ariaLabel?: string;\r\n    }\r\n  | {\r\n      src: string;\r\n      alt?: string;\r\n      href?: string;\r\n      title?: string;\r\n      srcSet?: string;\r\n      sizes?: string;\r\n      width?: number;\r\n      height?: number;\r\n    };\r\n\r\nexport interface LogoLoopProps {\r\n  logos: LogoItem[];\r\n  speed?: number;\r\n  direction?: 'left' | 'right';\r\n  width?: number | string;\r\n  logoHeight?: number;\r\n  gap?: number;\r\n  pauseOnHover?: boolean;\r\n  fadeOut?: boolean;\r\n  fadeOutColor?: string;\r\n  scaleOnHover?: boolean;\r\n  ariaLabel?: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nconst ANIMATION_CONFIG = {\r\n  SMOOTH_TAU: 0.25,\r\n  MIN_COPIES: 2,\r\n  COPY_HEADROOM: 2\r\n} as const;\r\n\r\nconst toCssLength = (value?: number | string): string | undefined =>\r\n  typeof value === 'number' ? `${value}px` : (value ?? undefined);\r\n\r\nconst useResizeObserver = (\r\n  callback: () => void,\r\n  elements: Array<React.RefObject<Element | null>>,\r\n  dependencies: React.DependencyList\r\n) => {\r\n  useEffect(() => {\r\n    if (!window.ResizeObserver) {\r\n      const handleResize = () => callback();\r\n      window.addEventListener('resize', handleResize);\r\n      callback();\r\n      return () => window.removeEventListener('resize', handleResize);\r\n    }\r\n\r\n    const observers = elements.map(ref => {\r\n      if (!ref.current) return null;\r\n      const observer = new ResizeObserver(callback);\r\n      observer.observe(ref.current);\r\n      return observer;\r\n    });\r\n\r\n    callback();\r\n\r\n    return () => {\r\n      observers.forEach(observer => observer?.disconnect());\r\n    };\r\n  }, dependencies);\r\n};\r\n\r\nconst useImageLoader = (\r\n  seqRef: React.RefObject<HTMLUListElement | null>,\r\n  onLoad: () => void,\r\n  dependencies: React.DependencyList\r\n) => {\r\n  useEffect(() => {\r\n    const images = seqRef.current?.querySelectorAll('img') ?? [];\r\n\r\n    if (images.length === 0) {\r\n      onLoad();\r\n      return;\r\n    }\r\n\r\n    let remainingImages = images.length;\r\n    const handleImageLoad = () => {\r\n      remainingImages -= 1;\r\n      if (remainingImages === 0) {\r\n        onLoad();\r\n      }\r\n    };\r\n\r\n    images.forEach(img => {\r\n      const htmlImg = img as HTMLImageElement;\r\n      if (htmlImg.complete) {\r\n        handleImageLoad();\r\n      } else {\r\n        htmlImg.addEventListener('load', handleImageLoad, { once: true });\r\n        htmlImg.addEventListener('error', handleImageLoad, { once: true });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      images.forEach(img => {\r\n        img.removeEventListener('load', handleImageLoad);\r\n        img.removeEventListener('error', handleImageLoad);\r\n      });\r\n    };\r\n  }, dependencies);\r\n};\r\n\r\nconst useAnimationLoop = (\r\n  trackRef: React.RefObject<HTMLDivElement | null>,\r\n  targetVelocity: number,\r\n  seqWidth: number,\r\n  isHovered: boolean,\r\n  pauseOnHover: boolean\r\n) => {\r\n  const rafRef = useRef<number | null>(null);\r\n  const lastTimestampRef = useRef<number | null>(null);\r\n  const offsetRef = useRef(0);\r\n  const velocityRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    const track = trackRef.current;\r\n    if (!track) return;\r\n\r\n    if (seqWidth > 0) {\r\n      offsetRef.current = ((offsetRef.current % seqWidth) + seqWidth) % seqWidth;\r\n      track.style.transform = `translate3d(${-offsetRef.current}px, 0, 0)`;\r\n    }\r\n\r\n    const animate = (timestamp: number) => {\r\n      if (lastTimestampRef.current === null) {\r\n        lastTimestampRef.current = timestamp;\r\n      }\r\n\r\n      const deltaTime = Math.max(0, timestamp - lastTimestampRef.current) / 1000;\r\n      lastTimestampRef.current = timestamp;\r\n\r\n      const target = pauseOnHover && isHovered ? 0 : targetVelocity;\r\n\r\n      const easingFactor = 1 - Math.exp(-deltaTime / ANIMATION_CONFIG.SMOOTH_TAU);\r\n      velocityRef.current += (target - velocityRef.current) * easingFactor;\r\n\r\n      if (seqWidth > 0) {\r\n        let nextOffset = offsetRef.current + velocityRef.current * deltaTime;\r\n        nextOffset = ((nextOffset % seqWidth) + seqWidth) % seqWidth;\r\n        offsetRef.current = nextOffset;\r\n\r\n        const translateX = -offsetRef.current;\r\n        track.style.transform = `translate3d(${translateX}px, 0, 0)`;\r\n      }\r\n\r\n      rafRef.current = requestAnimationFrame(animate);\r\n    };\r\n\r\n    rafRef.current = requestAnimationFrame(animate);\r\n\r\n    return () => {\r\n      if (rafRef.current !== null) {\r\n        cancelAnimationFrame(rafRef.current);\r\n        rafRef.current = null;\r\n      }\r\n      lastTimestampRef.current = null;\r\n    };\r\n  }, [targetVelocity, seqWidth, isHovered, pauseOnHover]);\r\n};\r\n\r\nexport const LogoLoop = React.memo<LogoLoopProps>(\r\n  ({\r\n    logos,\r\n    speed = 120,\r\n    direction = 'left',\r\n    width = '100%',\r\n    logoHeight = 28,\r\n    gap = 32,\r\n    pauseOnHover = true,\r\n    fadeOut = false,\r\n    fadeOutColor,\r\n    scaleOnHover = false,\r\n    ariaLabel = 'Partner logos',\r\n    className,\r\n    style\r\n  }) => {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const trackRef = useRef<HTMLDivElement>(null);\r\n    const seqRef = useRef<HTMLUListElement>(null);\r\n\r\n    const [seqWidth, setSeqWidth] = useState<number>(0);\r\n    const [copyCount, setCopyCount] = useState<number>(ANIMATION_CONFIG.MIN_COPIES);\r\n    const [isHovered, setIsHovered] = useState<boolean>(false);\r\n\r\n    const targetVelocity = useMemo(() => {\r\n      const magnitude = Math.abs(speed);\r\n      const directionMultiplier = direction === 'left' ? 1 : -1;\r\n      const speedMultiplier = speed < 0 ? -1 : 1;\r\n      return magnitude * directionMultiplier * speedMultiplier;\r\n    }, [speed, direction]);\r\n\r\n    const updateDimensions = useCallback(() => {\r\n      const containerWidth = containerRef.current?.clientWidth ?? 0;\r\n      const sequenceWidth = seqRef.current?.getBoundingClientRect?.()?.width ?? 0;\r\n\r\n      if (sequenceWidth > 0) {\r\n        setSeqWidth(Math.ceil(sequenceWidth));\r\n        const copiesNeeded = Math.ceil(containerWidth / sequenceWidth) + ANIMATION_CONFIG.COPY_HEADROOM;\r\n        setCopyCount(Math.max(ANIMATION_CONFIG.MIN_COPIES, copiesNeeded));\r\n      }\r\n    }, []);\r\n\r\n    useResizeObserver(updateDimensions, [containerRef, seqRef], [logos, gap, logoHeight]);\r\n\r\n    useImageLoader(seqRef, updateDimensions, [logos, gap, logoHeight]);\r\n\r\n    useAnimationLoop(trackRef, targetVelocity, seqWidth, isHovered, pauseOnHover);\r\n\r\n    const cssVariables = useMemo(\r\n      () =>\r\n        ({\r\n          '--logoloop-gap': `${gap}px`,\r\n          '--logoloop-logoHeight': `${logoHeight}px`,\r\n          ...(fadeOutColor && { '--logoloop-fadeColor': fadeOutColor })\r\n        }) as React.CSSProperties,\r\n      [gap, logoHeight, fadeOutColor]\r\n    );\r\n\r\n    const rootClassName = useMemo(\r\n      () =>\r\n        ['logoloop', fadeOut && 'logoloop--fade', scaleOnHover && 'logoloop--scale-hover', className]\r\n          .filter(Boolean)\r\n          .join(' '),\r\n      [fadeOut, scaleOnHover, className]\r\n    );\r\n\r\n    const handleMouseEnter = useCallback(() => {\r\n      if (pauseOnHover) setIsHovered(true);\r\n    }, [pauseOnHover]);\r\n\r\n    const handleMouseLeave = useCallback(() => {\r\n      if (pauseOnHover) setIsHovered(false);\r\n    }, [pauseOnHover]);\r\n\r\n    const renderLogoItem = useCallback((item: LogoItem, key: React.Key) => {\r\n      const isNodeItem = 'node' in item;\r\n\r\n      const content = isNodeItem ? (\r\n        <span className=\"logoloop__node\" aria-hidden={!!item.href && !item.ariaLabel}>\r\n          {item.node}\r\n        </span>\r\n      ) : (\r\n        <img\r\n          src={item.src}\r\n          srcSet={item.srcSet}\r\n          sizes={item.sizes}\r\n          width={item.width}\r\n          height={item.height}\r\n          alt={item.alt ?? ''}\r\n          title={item.title}\r\n          loading=\"lazy\"\r\n          decoding=\"async\"\r\n          draggable={false}\r\n        />\r\n      );\r\n\r\n      const itemAriaLabel = isNodeItem ? (item.ariaLabel ?? item.title) : (item.alt ?? item.title);\r\n\r\n      const itemContent = item.href ? (\r\n        <a\r\n          className=\"logoloop__link\"\r\n          href={item.href}\r\n          aria-label={itemAriaLabel || 'logo link'}\r\n          target=\"_blank\"\r\n          rel=\"noreferrer noopener\"\r\n        >\r\n          {content}\r\n        </a>\r\n      ) : (\r\n        content\r\n      );\r\n\r\n      return (\r\n        <li className=\"logoloop__item\" key={key} role=\"listitem\">\r\n          {itemContent}\r\n        </li>\r\n      );\r\n    }, []);\r\n\r\n    const logoLists = useMemo(\r\n      () =>\r\n        Array.from({ length: copyCount }, (_, copyIndex) => (\r\n          <ul\r\n            className=\"logoloop__list\"\r\n            key={`copy-${copyIndex}`}\r\n            role=\"list\"\r\n            aria-hidden={copyIndex > 0}\r\n            ref={copyIndex === 0 ? seqRef : undefined}\r\n          >\r\n            {logos.map((item, itemIndex) => renderLogoItem(item, `${copyIndex}-${itemIndex}`))}\r\n          </ul>\r\n        )),\r\n      [copyCount, logos, renderLogoItem]\r\n    );\r\n\r\n    const containerStyle = useMemo(\r\n      (): React.CSSProperties => ({\r\n        width: toCssLength(width) ?? '100%',\r\n        ...cssVariables,\r\n        ...style\r\n      }),\r\n      [width, cssVariables, style]\r\n    );\r\n\r\n    return (\r\n      <div\r\n        ref={containerRef}\r\n        className={rootClassName}\r\n        style={containerStyle}\r\n        role=\"region\"\r\n        aria-label={ariaLabel}\r\n        onMouseEnter={handleMouseEnter}\r\n        onMouseLeave={handleMouseLeave}\r\n      >\r\n        <div className=\"logoloop__track\" ref={trackRef}>\r\n          {logoLists}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nLogoLoop.displayName = 'LogoLoop';\r\n\r\nexport default LogoLoop;\r\n",
      "type": "registry:component"
    },
    {
      "path": "public/ts/default/src/ts-default/Animations/LogoLoop/LogoLoop.css",
      "content": ".logoloop {\r\n  position: relative;\r\n  overflow-x: hidden;\r\n\r\n  --logoloop-gap: 32px;\r\n  --logoloop-logoHeight: 28px;\r\n  --logoloop-fadeColorAuto: #ffffff;\r\n}\r\n\r\n.logoloop--scale-hover {\r\n  padding-top: calc(var(--logoloop-logoHeight) * 0.1);\r\n  padding-bottom: calc(var(--logoloop-logoHeight) * 0.1);\r\n}\r\n\r\n@media (prefers-color-scheme: dark) {\r\n  .logoloop {\r\n    --logoloop-fadeColorAuto: #0b0b0b;\r\n  }\r\n}\r\n\r\n.logoloop__track {\r\n  display: flex;\r\n  width: max-content;\r\n  will-change: transform;\r\n  user-select: none;\r\n}\r\n\r\n.logoloop__list {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.logoloop__item {\r\n  flex: 0 0 auto;\r\n  margin-right: var(--logoloop-gap);\r\n  font-size: var(--logoloop-logoHeight);\r\n  line-height: 1;\r\n}\r\n\r\n.logoloop__item:last-child {\r\n  margin-right: var(--logoloop-gap);\r\n}\r\n\r\n.logoloop__node {\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n\r\n.logoloop__item img {\r\n  height: var(--logoloop-logoHeight);\r\n  width: auto;\r\n  display: block;\r\n  object-fit: contain;\r\n  image-rendering: -webkit-optimize-contrast;\r\n  -webkit-user-drag: none;\r\n  pointer-events: none; /* Links handle interaction */\r\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n\r\n.logoloop--scale-hover .logoloop__item {\r\n  overflow: visible;\r\n}\r\n\r\n.logoloop--scale-hover .logoloop__item:hover img,\r\n.logoloop--scale-hover .logoloop__item:hover .logoloop__node {\r\n  transform: scale(1.2);\r\n  transform-origin: center center;\r\n}\r\n\r\n.logoloop--scale-hover .logoloop__node {\r\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n\r\n.logoloop__link {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  text-decoration: none;\r\n  border-radius: 4px;\r\n  transition: opacity 0.2s ease;\r\n}\r\n\r\n.logoloop__link:hover {\r\n  opacity: 0.8;\r\n}\r\n\r\n.logoloop__link:focus-visible {\r\n  outline: 2px solid currentColor;\r\n  outline-offset: 2px;\r\n}\r\n\r\n.logoloop--fade::before,\r\n.logoloop--fade::after {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: clamp(24px, 8%, 120px);\r\n  pointer-events: none;\r\n  z-index: 1;\r\n}\r\n\r\n.logoloop--fade::before {\r\n  left: 0;\r\n  background: linear-gradient(\r\n    to right,\r\n    var(--logoloop-fadeColor, var(--logoloop-fadeColorAuto)) 0%,\r\n    rgba(0, 0, 0, 0) 100%\r\n  );\r\n}\r\n\r\n.logoloop--fade::after {\r\n  right: 0;\r\n  background: linear-gradient(\r\n    to left,\r\n    var(--logoloop-fadeColor, var(--logoloop-fadeColorAuto)) 0%,\r\n    rgba(0, 0, 0, 0) 100%\r\n  );\r\n}\r\n\r\n@media (prefers-reduced-motion: reduce) {\r\n  .logoloop__track {\r\n    transform: translate3d(0, 0, 0) !important;\r\n  }\r\n\r\n  .logoloop__item img,\r\n  .logoloop__node {\r\n    transition: none !important;\r\n  }\r\n}\r\n",
      "type": "registry:item"
    }
  ]
}