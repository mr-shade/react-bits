{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "RollingGallery-TS-TW",
  "type": "registry:block",
  "title": "RollingGallery",
  "description": "3D rolling gallery with drag controls.",
  "dependencies": [
    "motion"
  ],
  "files": [
    {
      "path": "public/ts/tailwind/src/ts-tailwind/Components/RollingGallery/RollingGallery.tsx",
      "content": "import React, { useEffect, useState } from 'react';\r\nimport { motion, useMotionValue, useAnimation, useTransform, PanInfo, ResolvedValues } from 'motion/react';\r\n\r\nconst IMGS: string[] = [\r\n  'https://images.unsplash.com/photo-1528181304800-259b08848526?q=80&w=3870&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://images.unsplash.com/photo-1506665531195-3566af2b4dfa?q=80&w=3870&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?q=80&w=3456&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://images.unsplash.com/photo-1495103033382-fe343886b671?q=80&w=3870&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://images.unsplash.com/photo-1506781961370-37a89d6b3095?q=80&w=3264&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://images.unsplash.com/photo-1599576838688-8a6c11263108?q=80&w=3870&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://images.unsplash.com/photo-1494094892896-7f14a4433b7a?q=80&w=3870&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://plus.unsplash.com/premium_photo-1664910706524-e783eed89e71?q=80&w=3869&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://images.unsplash.com/photo-1503788311183-fa3bf9c4bc32?q=80&w=3870&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',\r\n  'https://images.unsplash.com/photo-1585970480901-90d6bb2a48b5?q=80&w=3774&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'\r\n];\r\n\r\ninterface RollingGalleryProps {\r\n  autoplay?: boolean;\r\n  pauseOnHover?: boolean;\r\n  images?: string[];\r\n}\r\n\r\nconst RollingGallery: React.FC<RollingGalleryProps> = ({ autoplay = false, pauseOnHover = false, images = [] }) => {\r\n  const galleryImages = images.length > 0 ? images : IMGS;\r\n\r\n  const [isScreenSizeSm, setIsScreenSizeSm] = useState<boolean>(window.innerWidth <= 640);\r\n  useEffect(() => {\r\n    const handleResize = () => setIsScreenSizeSm(window.innerWidth <= 640);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const cylinderWidth: number = isScreenSizeSm ? 1100 : 1800;\r\n  const faceCount: number = galleryImages.length;\r\n  const faceWidth: number = (cylinderWidth / faceCount) * 1.5;\r\n  const radius: number = cylinderWidth / (2 * Math.PI);\r\n\r\n  const dragFactor: number = 0.05;\r\n  const rotation = useMotionValue(0);\r\n  const controls = useAnimation();\r\n\r\n  const transform = useTransform(rotation, (val: number) => `rotate3d(0,1,0,${val}deg)`);\r\n\r\n  const startInfiniteSpin = (startAngle: number) => {\r\n    controls.start({\r\n      rotateY: [startAngle, startAngle - 360],\r\n      transition: {\r\n        duration: 20,\r\n        ease: 'linear',\r\n        repeat: Infinity\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (autoplay) {\r\n      const currentAngle = rotation.get();\r\n      startInfiniteSpin(currentAngle);\r\n    } else {\r\n      controls.stop();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [autoplay]);\r\n\r\n  const handleUpdate = (latest: ResolvedValues) => {\r\n    if (typeof latest.rotateY === 'number') {\r\n      rotation.set(latest.rotateY);\r\n    }\r\n  };\r\n\r\n  const handleDrag = (_: MouseEvent | TouchEvent | PointerEvent, info: PanInfo): void => {\r\n    controls.stop();\r\n    rotation.set(rotation.get() + info.offset.x * dragFactor);\r\n  };\r\n\r\n  const handleDragEnd = (_: MouseEvent | TouchEvent | PointerEvent, info: PanInfo): void => {\r\n    const finalAngle = rotation.get() + info.velocity.x * dragFactor;\r\n    rotation.set(finalAngle);\r\n    if (autoplay) {\r\n      startInfiniteSpin(finalAngle);\r\n    }\r\n  };\r\n\r\n  const handleMouseEnter = (): void => {\r\n    if (autoplay && pauseOnHover) {\r\n      controls.stop();\r\n    }\r\n  };\r\n\r\n  const handleMouseLeave = (): void => {\r\n    if (autoplay && pauseOnHover) {\r\n      const currentAngle = rotation.get();\r\n      startInfiniteSpin(currentAngle);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative h-[500px] w-full overflow-hidden\">\r\n      <div\r\n        className=\"absolute top-0 left-0 h-full w-[48px] z-10\"\r\n        style={{\r\n          background: 'linear-gradient(to left, rgba(0,0,0,0) 0%, #060010 100%)'\r\n        }}\r\n      />\r\n      <div\r\n        className=\"absolute top-0 right-0 h-full w-[48px] z-10\"\r\n        style={{\r\n          background: 'linear-gradient(to right, rgba(0,0,0,0) 0%, #060010 100%)'\r\n        }}\r\n      />\r\n      <div className=\"flex h-full items-center justify-center [perspective:1000px] [transform-style:preserve-3d]\">\r\n        <motion.div\r\n          drag=\"x\"\r\n          dragElastic={0}\r\n          onDrag={handleDrag}\r\n          onDragEnd={handleDragEnd}\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n          animate={controls}\r\n          onUpdate={handleUpdate}\r\n          style={{\r\n            transform: transform,\r\n            rotateY: rotation,\r\n            width: cylinderWidth,\r\n            transformStyle: 'preserve-3d'\r\n          }}\r\n          className=\"flex min-h-[200px] cursor-grab items-center justify-center [transform-style:preserve-3d]\"\r\n        >\r\n          {galleryImages.map((url, i) => (\r\n            <div\r\n              key={i}\r\n              className=\"group absolute flex h-fit items-center justify-center p-[8%] [backface-visibility:hidden] md:p-[6%]\"\r\n              style={{\r\n                width: `${faceWidth}px`,\r\n                transform: `rotateY(${(360 / faceCount) * i}deg) translateZ(${radius}px)`\r\n              }}\r\n            >\r\n              <img\r\n                src={url}\r\n                alt=\"gallery\"\r\n                className=\"pointer-events-none h-[120px] w-[300px] rounded-[15px] border-[3px] border-white object-cover transition-transform duration-300 ease-out group-hover:scale-105 sm:h-[100px] sm:w-[220px]\"\r\n              />\r\n            </div>\r\n          ))}\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RollingGallery;\r\n",
      "type": "registry:component"
    }
  ]
}